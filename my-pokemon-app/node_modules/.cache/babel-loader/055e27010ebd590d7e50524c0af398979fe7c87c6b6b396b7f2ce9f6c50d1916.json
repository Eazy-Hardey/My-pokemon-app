{"ast":null,"code":"// src/components/PokemonList.js\nimport React,{useState,useEffect,useCallback}from'react';import axios from'axios';import{Link}from'react-router-dom';import SearchBar from'./SearchBar';import'./PokemonList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PokemonList(){const[pokemon,setPokemon]=useState([]);const[offset,setOffset]=useState(0);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[searchQuery,setSearchQuery]=useState('');const fetchPokemon=useCallback(async()=>{try{setLoading(true);const response=await axios.get(`https://pokeapi.co/api/v2/pokemon?offset=${offset}&limit=20`);const pokemonWithDetails=await Promise.all(response.data.results.map(async pokemon=>{const details=await axios.get(pokemon.url);return{name:pokemon.name,image:details.data.sprites.front_default};}));setPokemon(prev=>[...prev,...pokemonWithDetails]);setLoading(false);}catch(error){setLoading(false);setError('Failed to load Pokémon data');}},[offset]);useEffect(()=>{fetchPokemon();},[fetchPokemon]);const handleScroll=useCallback(()=>{if(window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||loading)return;setOffset(prev=>prev+20);},[loading]);useEffect(()=>{window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[handleScroll]);const filteredPokemon=pokemon.filter(p=>p.name.toLowerCase().includes(searchQuery.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"pokemon-list\",children:[/*#__PURE__*/_jsx(SearchBar,{onSearch:setSearchQuery}),error&&/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"ul\",{children:filteredPokemon.map((pokemon,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"pokemon-item\",children:/*#__PURE__*/_jsxs(Link,{to:`/pokemon/${pokemon.name}`,children:[/*#__PURE__*/_jsx(\"img\",{src:pokemon.image,alt:pokemon.name,className:\"pokemon-image\"}),/*#__PURE__*/_jsx(\"span\",{className:\"pokemon-name\",children:pokemon.name})]})},index))}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]});}export default PokemonList;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","Link","SearchBar","jsx","_jsx","jsxs","_jsxs","PokemonList","pokemon","setPokemon","offset","setOffset","loading","setLoading","error","setError","searchQuery","setSearchQuery","fetchPokemon","response","get","pokemonWithDetails","Promise","all","data","results","map","details","url","name","image","sprites","front_default","prev","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","filteredPokemon","filter","p","toLowerCase","includes","className","children","onSearch","index","to","src","alt"],"sources":["/home/docode/project/my-pokemon-app/src/components/PokemonList.js"],"sourcesContent":["// src/components/PokemonList.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport SearchBar from './SearchBar';\nimport './PokemonList.css';\n\nfunction PokemonList() {\n  const [pokemon, setPokemon] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const fetchPokemon = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`https://pokeapi.co/api/v2/pokemon?offset=${offset}&limit=20`);\n      const pokemonWithDetails = await Promise.all(\n        response.data.results.map(async (pokemon) => {\n          const details = await axios.get(pokemon.url);\n          return { name: pokemon.name, image: details.data.sprites.front_default };\n        })\n      );\n      setPokemon((prev) => [...prev, ...pokemonWithDetails]);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setError('Failed to load Pokémon data');\n    }\n  }, [offset]);\n\n  useEffect(() => {\n    fetchPokemon();\n  }, [fetchPokemon]);\n\n  const handleScroll = useCallback(() => {\n    if (window.innerHeight + document.documentElement.scrollTop !== document.documentElement.offsetHeight || loading) return;\n    setOffset((prev) => prev + 20);\n  }, [loading]);\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [handleScroll]);\n\n  const filteredPokemon = pokemon.filter((p) =>\n    p.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <div className=\"pokemon-list\">\n      <SearchBar onSearch={setSearchQuery} />\n      {error && <p>{error}</p>}\n      <ul>\n        {filteredPokemon.map((pokemon, index) => (\n          <li key={index} className=\"pokemon-item\">\n            <Link to={`/pokemon/${pokemon.name}`}>\n              <img src={pokemon.image} alt={pokemon.name} className=\"pokemon-image\" />\n              <span className=\"pokemon-name\">{pokemon.name}</span>\n            </Link>\n          </li>\n        ))}\n      </ul>\n      {loading && <p>Loading...</p>}\n    </div>\n  );\n}\n\nexport default PokemonList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}